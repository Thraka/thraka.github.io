<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Version 3 Release | Thraka</title>
  <meta name="author" content="Thraka">
  
  <meta name="description" content="It’s finally done! Version 3 of SadConsole brings a lot of structural changes and increases flexibility.  Previously it was hard to implement new types of objects that hooked into the rendering system. And whenever I did create something extra, I always felt like I was trying to fit it around the system instead of the system being flexible enough to handle it. Not any more!
Version 3.0 has taken me 2 1/2 months, 113 commits to the code repository, and 192 files were edited.
Here is a class diagram of how the system is put together now. Click below after the picture for more about the changes.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Version 3 Release"/>
  <meta property="og:site_name" content="Thraka"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-76753055-1', 'auto');
  ga('send', 'pageview');
</script>




</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Thraka</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
            
            <a href="/archives" title="All the articles.">
            
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
            
            <a href="/categories" title="All the categories.">
            
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
            
            <a href="/about" title="About me.">
            
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
            
            <a href="/atom.xml" title="Subscribe">
            
			  <i class="fa fa-rss"></i>RSS
			</a>
		  </li>
		  
		  <li>
            
			<a href="https://www.reddit.com/r/sadconsole/" title="SadConsole SubReddit">
            
			  <i class="fa fa-reddit"></i>Reddit
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> Version 3 Release</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <p>It’s finally done! Version 3 of SadConsole brings a lot of structural changes and increases flexibility.  <a href="/2016/04/23/thoughts-on-rendering-a-console">Previously</a> it was hard to implement new types of objects that hooked into the rendering system. And whenever I did create something extra, I always felt like I was trying to fit it around the system instead of the system being flexible enough to handle it. Not any more!</p>
<p>Version 3.0 has taken me 2 1/2 months, 113 commits to the code repository, and 192 files were edited.</p>
<p>Here is a class diagram of how the system is put together now. Click below after the picture for more about the changes.</p>
<img src="/2016/07/13/version-3-release/v3-rendering-classes.png" alt="version 3 class structure" title="version 3 class structure">
<a id="more"></a>
<p>The system is made up of three concepts (that work out to different types)</p>
<ol>
<li><p><em>TextSurface</em><br>This represents the text data of a surface.</p>
</li>
<li><p><em>TextSurfaceRenderer</em><br>Takes in TextSurface data and draws it to the screen.</p>
</li>
<li><p><em>SurfaceEditor</em><br>Provides a way to change a TextSurface, like the background or foreground of cells.</p>
</li>
</ol>
<p>What about the classic <strong>SadConsole.Consoles.Console</strong> type? It’s there. This class is a <code>SurfaceEditor</code> that has both a <code>TextSurface</code> and <code>TextSurfaceRenderer</code>. The concept of a <code>Console</code> comes together when you combine those three elements. The <code>Console</code> still has all the other things: cursor, position, and input handling.</p>
<p>You can easily use a <code>TextSurfaceRenderer</code> to render a <code>TextSurface</code> directly, and you can use the <code>SurfaceEditor</code> to change the data on the <code>TextSurface</code>, all without the actual <code>Console</code> type.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> surface = <span class="keyword">new</span> SadConsole.Consoles.TextSurface(<span class="number">16</span>, <span class="number">5</span>, SadConsole.Engine.DefaultFont);</span><br><span class="line"><span class="keyword">var</span> editor = <span class="keyword">new</span> SadConsole.Consoles.SurfaceEditor(surface);</span><br><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> SadConsole.Consoles.TextSurfaceRenderer();</span><br><span class="line"></span><br><span class="line">editor.Fill(Color.Aqua, Color.Gray, <span class="number">0</span>, <span class="literal">null</span>);</span><br><span class="line">editor.Print(<span class="number">2</span>, <span class="number">2</span>, <span class="string">"Hello World!"</span>);</span><br><span class="line"></span><br><span class="line">renderer.Render(surface, <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>This flexability allows us to create new types of data and rendering systems. For example, there is now a <code>CachedTextSurfaceRenderer</code> that instead of rendering the <code>TextSurface</code> on every render call, it renders once and keeps that output for every subsequent render call. You have to explicitly tell it to update itself. This is handy for UI elements, frames and borders, and text areas that never change once rendered. If a text surface is 10x10, that is about 200 renders calls every frame. With the <code>CachedTextSurfaceRenderer</code> you take those 200 render calls once, and then every time after that a single render call is done. Very optimized.</p>
<h2 id="Sample-code"><a href="#Sample-code" class="headerlink" title="Sample code"></a>Sample code</h2><p>Here are some common examples of using the new types.</p>
<h3 id="Create-a-console"><a href="#Create-a-console" class="headerlink" title="Create a console"></a>Create a console</h3><p>By default, SadConsole handles all rendering and updates of a <code>Console</code> type for you. Just add it to the <code>SadConsole.Engine.ConsoleRenderStack</code> collection.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> console = <span class="keyword">new</span> SadConsole.Consoles.Console(<span class="number">16</span>, <span class="number">5</span>);</span><br><span class="line">console.Fill(Color.Aqua, Color.Gray, <span class="number">0</span>, <span class="literal">null</span>);</span><br><span class="line">console.Print(<span class="number">2</span>, <span class="number">2</span>, <span class="string">"Hello World!"</span>);</span><br><span class="line">console.Position = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">SadConsole.Engine.ConsoleRenderStack.Add(console);</span><br></pre></td></tr></table></figure>
<img src="/2016/07/13/version-3-release/hello-world-1.png" alt="Hello world rendered in SadConsole" title="Hello world rendered in SadConsole">
<h3 id="Manually-render-a-TextSurface"><a href="#Manually-render-a-TextSurface" class="headerlink" title="Manually render a TextSurface"></a>Manually render a TextSurface</h3><p>You can take any existing TextSurface and render it multiple times. A console draws it self once per frame, wherever <code>Console.Position</code> points to on the screen, but we can also draw manually if we would like to duplicate the console. </p>
<blockquote>
<p><strong>NOTE</strong><br>Remember that the console is still in the <code>SadConsole.Engine.ConsoleRenderStack</code> and will draw at position <strong>1, 1</strong>.</p>
</blockquote>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.Renderer.Render(console.TextSurface, <span class="keyword">new</span> Point(<span class="number">19</span>, <span class="number">1</span>), <span class="literal">false</span>);</span><br><span class="line">console.Renderer.Render(console.TextSurface, <span class="keyword">new</span> Point(<span class="number">37</span>, <span class="number">1</span>), <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<img src="/2016/07/13/version-3-release/hello-world-2.png" alt="Hello world rendered three times in SadConsole" title="Hello world rendered three times in SadConsole">
<p>Instead of using the console itself to render, you could also do it all by hand.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> SadConsole.Consoles.TextSurfaceRenderer();</span><br><span class="line"><span class="keyword">var</span> textSurface = console.TextSurface;</span><br><span class="line"></span><br><span class="line">renderer.Render(textSurface, <span class="keyword">new</span> Point(<span class="number">19</span>, <span class="number">1</span>), <span class="literal">false</span>);</span><br><span class="line">renderer.Render(textSurface, <span class="keyword">new</span> Point(<span class="number">37</span>, <span class="number">1</span>), <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h2><p>In the next blog post, I’ll show how to use the render multiple layers on a console using built in types. </p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">

    
    
    <a href="/2016/08/12/easier-startup/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2016/06/01/cached-console/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
    <h2 class="title">Comments</h2>

    
    <div id="disqus_thread" class="ds-thread">
        <script type="text/javascript">
            /**
             * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
             * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
             */
                
            var disqus_config = function () {
                this.page.url = "http://thraka.github.io/2016/07/13/version-3-release/"; // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = "2016/07/13/version-3-release/"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };
                 
            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');

                s.src = '//sadconsoleblog.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by
                Disqus.</a></noscript>
    </div>
    
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2016-07-13 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/SadConsole/">SadConsole<span>5</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/SadConsole/">SadConsole<span>5</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2016 Thraka
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a>,<a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>,<a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a> and <a href="http://getbootstrap.com/" target="_blank">BOOTSTRA.386</a>. 
     <br> Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind.386</a>.    
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
