<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>title: Working with input
layout: docpage
comments: false
searcharchive: true </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="title: Working with input
layout: docpage
comments: false
searcharchive: true ">
    <meta name="generator" content="docfx 2.40.11.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/dracula.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" src="../../images/SadConsoleLogo.gif" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="title-working-with-inputlayout-docpagecomments-falsesearcharchive-true">title: Working with input
layout: docpage
comments: false
searcharchive: true</h2>

<blockquote>
<p><strong>NOTE</strong><br>
This article was written for version 7 of SadConsole.</p>
</blockquote>
<p>The <em>SadConsole.Engine</em> static class processes input for the entire SadConsole framework. At this point, it only includes the <strong>Keyboard</strong> and <strong>Mouse</strong> inputs as <strong>Controller</strong> support has not been implemented yet. <strong>Controller</strong> support is provided by MonoGame. Keyboard and Mouse states have been updated by the time the <code>Global.Update</code> method has been called.</p>
<p>When the mouse and keyboard information is sent to a console, the <em>SadConsole.Console.ProcessMouse(SadConsole.Input.MouseConsoleState)</em> and the <em>SadConsole.Console.ProcessKeyboard(SadConsole.Input.Keyboard)</em> methods will be called. Each console can indicate if it wants to process the mouse and keyboard input. These two properties, <code>SadConsole.Console.UseKeyboard</code> and <code>SadConsole.Console.UseMouse</code>, default to <code>True</code>. Regardless of the <strong>Console</strong> settings though, if the Engine's mouse or keyboard processing is turned off, the console will never have these methods called.</p>
<h4 id="engine-input">Engine input</h4>
<p>Input processing by the engine can be toggled on or off with the <code>Settings.Input.DoKeyboard</code> and <code>Settings.Input.DoMouse</code> properties. Both input types are on by default.</p>
<p>The <code>Global.FocusedConsoles</code> property specifies which consoles should receive keyboard events. It is always the first in the stack. This console is considered the focused console. No other console will ever receive keyboard input, however, other consoles may receive mouse input. When this property changes, the <code>Console.Focused()</code> and <code>Console.FocusLost()</code> methods are called on the appropriate consoles.</p>
<p>When the <code>Engine.Update</code> method is called, the input system flows like this:</p>
<ol>
<li><p>If <code>Settings.Input.DoKeyboard</code> is true</p>
<ol>
<li>Update <code>Global.KeyboardState</code> with the latest state.</li>
<li>Look for a <code>Global.FocusedConsoles.Console</code> to process the keyboard.</li>
</ol>
</li>
<li><p>If <code>Settings.Input.DoMouse</code> is true</p>
<ol>
<li>Update <code>Global.MouseState</code> with the latest state.</li>
<li>Check if <code>Global.FocusedConsoles.Console</code> has <code>ExclusiveFocus</code> set.</li>
<li>If <code>ExclusiveFocus</code> is not set, search through <code>Global.CurrentScreen</code> for all <code>IConsole</code> types and <code>ProcessMouse</code> until one returns true.</li>
</ol>
</li>
<li><p>Cycle through the <code>Global.CurrentScreen</code> and call <code>Update</code> on everything.</p>
</li>
<li><p>Invoke the <code>SadConsole.Game.OnUpdate</code> callback.</p>
</li>
</ol>
<h5 id="mouse-details">Mouse details</h5>
<p>The left and right button states are tracked, as well as any information related to the console under the mouse. The <code>Global.MouseState</code> property is an instance of the <code>SadConsole.Input.Mouse</code> type and is always available for you to peek at.</p>
<table>
<thead>
<tr>
<th>Mouse Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>LeftButtonDown</td>
<td>The left button is currently down.</td>
</tr>
<tr>
<td>LeftClicked</td>
<td>The left button was down at the last check but is currently up.</td>
</tr>
<tr>
<td>LeftDoubleClicked</td>
<td>The left button was just double clicked in under a second.</td>
</tr>
<tr>
<td>RightButtonDown</td>
<td>The right button is currently down.</td>
</tr>
<tr>
<td>RightClicked</td>
<td>The right button was down at the last check but is currently up.</td>
</tr>
<tr>
<td>RightDoubleClicked</td>
<td>The right button was just double clicked in under a second.</td>
</tr>
</tbody>
</table>
<p>Whenever the <code>ProcessMouse</code> method is called on an <code>IConsole</code>, the mouse state is wrapped in a <code>SadConsole.Input.MouseConsoleState</code> type which represents how the console sees the mouse.</p>
<h5 id="keyboard-details">Keyboard details</h5>
<p>The keyboard works similar to the mouse. The <code>Global.KeyboardState</code> property is an instance of the <code>SadConsole.Input.Keyboard</code> type and is always available for you to peek at. This instance tracks the state of the keyboard throughout the application's lifetime.</p>
<table>
<thead>
<tr>
<th>Keyboard Properties</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>KeysDown</td>
<td>A collection of all keys that are currently down.</td>
</tr>
<tr>
<td>KeysPressed</td>
<td>A collection of all keys that were down on the last check, but are now up, indicating a key press.</td>
</tr>
<tr>
<td>KeysReleased</td>
<td>A collection of all keys are currently up. This may include keys in the KeysPressed collection.</td>
</tr>
</tbody>
</table>
<h4 id="focusing-consoles-with-the-mouse">Focusing consoles with the mouse</h4>
<p>By default, a console can become the active console by clicking it with the mouse. When the mouse clicks on a console, and the <code>Console.FocusOnMouseClick</code> property is set to <code>True</code>, the <code>Global.FocusedConsoles</code> property will be set to the console.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
